{{- $.Scratch.Add "atom_id" (printf "tag:%s,%s:%s" $Site.BaseURL ($.Date.Format "2006-01-02") $.Site.Params.AtomAuthorEmail) -}}
{{- $.Scratch.Add "atom_updated" .Date.UTC.Format "2006-01-02T15:04:05Z" -}}
{{- $.Scratch.Add "atom_link" (dict "Rel" "self" "Type" "application/atom+xml" "Href" ($.Permalink | absURL)) -}}

{{- printf "<?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?>
<feed xmlns=\"http://www.w3.org/2005/Atom\">
    <title>%s</title>
    <id>%s</id>
    <updated>%s</updated>
    <link rel=\"%s\" type=\"%s\" href=\"%s\"/>
    <author>
        <name>%s</name>
        <email>%s</email>
    </author>
    {{ range .Data.Pages -}}
        <entry>
            <title>{{ .Title }}</title>
            <link href=\"%s\"/>
            <id>{{ printf \"tag:%s,%s:%s\" $.Site.BaseURL (.Date.Format \"2006-01-02\") .Permalink }}</id>
            <updated>{{ .Date.UTC.Format \"2006-01-02T15:04:05Z\" }}</updated>
            <content type=\"html\">{{ .Content }}</content>
        </entry>
    {{- end }}
</feed>" .Site.Title ($.Scratch.Get "atom_id") ($.Scratch.Get "atom_updated") ($.Scratch.Get "atom_link.Rel") ($.Scratch.Get "atom_link.Type") ($.Scratch.Get "atom_link.Href") $.Site.Params.AuthorName $.Site.Params.AtomAuthorEmail .Permalink -}}
